<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="pipeR : Multi-paradigm Pipeline Implementation">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>pipeR</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/renkun-ken/pipeR">View on GitHub</a>

          <h1 id="project_title">pipeR</h1>
          <h2 id="project_tagline">Multi-paradigm Pipeline Implementation</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/renkun-ken/pipeR/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/renkun-ken/pipeR/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="piper" class="anchor" href="#piper" aria-hidden="true"><span class="octicon octicon-link"></span></a>pipeR</h1>

<p><a href="https://travis-ci.org/renkun-ken/pipeR"><img src="https://travis-ci.org/renkun-ken/pipeR.png?branch=master" alt="Build Status"></a></p>

<p>pipeR provides various styles of function chaining methods: </p>

<ul>
<li>Pipe operator</li>
<li>Pipe object</li>
<li>pipeline function</li>
</ul>

<p>Each of them represents a distinct pipeline model but they share almost a common set of features. A value can be piped to the next expression</p>

<ul>
<li>As the first unnamed argument of the function</li>
<li>As dot symbol (<code>.</code>) in the expression</li>
<li>As a named variable defined by a formula</li>
<li>For side-effect that carries over the input to the next</li>
<li>For assignment that saves an intermediate value</li>
</ul>

<p>The syntax is designed to make the pipeline more readable and friendly to
a wide variety of operations.</p>

<p><strong><a href="http://renkun.me/pipeR-tutorial">pipeR Tutorial</a> is a highly recommended complete guide to pipeR.</strong></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Install the latest development version from GitHub:</p>

<div class="highlight highlight-r"><pre><span class="pl-e">devtools</span><span class="pl-k">::</span>install_github(<span class="pl-s1"><span class="pl-pds">"</span>renkun-ken/pipeR<span class="pl-pds">"</span></span>)</pre></div>

<p>Install from <a href="http://cran.r-project.org/web/packages/pipeR/index.html">CRAN</a>:</p>

<div class="highlight highlight-r"><pre>install.packages(<span class="pl-s1"><span class="pl-pds">"</span>pipeR<span class="pl-pds">"</span></span>)</pre></div>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started</h2>

<p>The following code is an example written in traditional approach:</p>

<p>It basically performs bootstrap on <code>mpg</code> values in built-in dataset <code>mtcars</code> and plots  its density function estimated by Gaussian kernel.</p>

<div class="highlight highlight-r"><pre>plot(density(sample(<span class="pl-vo">mtcars</span><span class="pl-k">$</span><span class="pl-vo">mpg</span>, <span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">10000</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>), 
  <span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>gaussian<span class="pl-pds">"</span></span>), <span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span><span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>density of mpg (bootstrap)<span class="pl-pds">"</span></span>)</pre></div>

<p>The code is deeply nested and can be hard to read and maintain. In the following examples, the traditional code is rewritten by Pipe operator, <code>Pipe()</code> function and <code>pipeline()</code> function, respectively.</p>

<ul>
<li>Operator-based pipeline</li>
</ul>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span><span class="pl-k">$</span><span class="pl-vo">mpg</span> %<span class="pl-k">&gt;&gt;</span>%
  sample(<span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">10000</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>) %<span class="pl-k">&gt;&gt;</span>%
  density(<span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>gaussian<span class="pl-pds">"</span></span>) %<span class="pl-k">&gt;&gt;</span>%
  plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>density of mpg (bootstrap)<span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>Object-based pipeline (<code>Pipe()</code>)</li>
</ul>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span><span class="pl-k">$</span><span class="pl-vo">mpg</span>)<span class="pl-k">$</span>
  sample(<span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">10000</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>)<span class="pl-k">$</span>
  density(<span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>gaussian<span class="pl-pds">"</span></span>)<span class="pl-k">$</span>
  plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>density of mpg (bootstrap)<span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>Argument-based pipeline</li>
</ul>

<div class="highlight highlight-r"><pre>pipeline(<span class="pl-vo">mtcars</span><span class="pl-k">$</span><span class="pl-vo">mpg</span>,
  sample(<span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">10000</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>),
  density(<span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>gaussian<span class="pl-pds">"</span></span>),
  plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>density of mpg (bootstrap)<span class="pl-pds">"</span></span>))</pre></div>

<ul>
<li>Expression-based pipeline</li>
</ul>

<div class="highlight highlight-r"><pre>pipeline({
  <span class="pl-vo">mtcars</span><span class="pl-k">$</span><span class="pl-vo">mpg</span>
  sample(<span class="pl-v">size</span> <span class="pl-k">=</span> <span class="pl-c1">10000</span>, <span class="pl-v">replace</span> <span class="pl-k">=</span> <span class="pl-c1">TRUE</span>)
  density(<span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>gaussian<span class="pl-pds">"</span></span>)
  plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>density of mpg (bootstrap)<span class="pl-pds">"</span></span>)  
})</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="" class="anchor" href="#" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>%&gt;&gt;%</code>
</h3>

<p>Pipe operator <code>%&gt;&gt;%</code> basically pipes the left-hand side value forward to the right-hand side expression which is evaluated according to its syntax.</p>

<h4>
<a id="pipe-to-first-argument-of-function" class="anchor" href="#pipe-to-first-argument-of-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pipe to first-argument of function</h4>

<p>Many R functions are pipe-friendly: they take some data by the first argument and transform it in a certain way. This arrangement allows operations to be streamlined by pipes, that is, one data source can be put to the first argument of a function, get transformed, and put to the first argument of the next function. In this way, a chain of commands are connected, and it is called a pipeline.</p>

<p>On the right-hand side of <code>%&gt;&gt;%</code>, whenever a function name or call is supplied, the left-hand side value will always be put to the first unnamed argument to that function.</p>

<div class="highlight highlight-r"><pre>rnorm(<span class="pl-c1">100</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-vo">plot</span></pre></div>

<div class="highlight highlight-r"><pre>rnorm(<span class="pl-c1">100</span>) %<span class="pl-k">&gt;&gt;</span>%
  plot(<span class="pl-v">col</span><span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>)</pre></div>

<p>Sometimes the value on the left is needed at multiple places. One can use <code>.</code> to represent it anywhere in the function call.</p>

<div class="highlight highlight-r"><pre>rnorm(<span class="pl-c1">100</span>) %<span class="pl-k">&gt;&gt;</span>%
  plot(<span class="pl-v">col</span><span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>, <span class="pl-v">main</span><span class="pl-k">=</span>length(.))</pre></div>

<p>There are situations where one calls a function in a namespace with <code>::</code>. In this case, the call must end up with <code>()</code>.</p>

<div class="highlight highlight-r"><pre>rnorm(<span class="pl-c1">100</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-e">stats</span><span class="pl-k">::</span>median()

rnorm(<span class="pl-c1">100</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-e">graphics</span><span class="pl-k">::</span>plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="pipe-to--in-an-expression" class="anchor" href="#pipe-to--in-an-expression" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pipe to <code>.</code> in an expression</h4>

<p>Not all functions are pipe-friendly in every case: You may find some functions do not take your data produced by a pipeline as the first argument. In this case, you can enclose your expression by <code>{}</code> or <code>()</code> so that <code>%&gt;&gt;%</code> will use <code>.</code> to represent the value on the left.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  { lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">cyl</span> <span class="pl-k">+</span> <span class="pl-vo">wt</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .) }</pre></div>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  ( lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">cyl</span> <span class="pl-k">+</span> <span class="pl-vo">wt</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .) )</pre></div>

<h4>
<a id="pipe-by-formula-as-lambda-expression" class="anchor" href="#pipe-by-formula-as-lambda-expression" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pipe by formula as lambda expression</h4>

<p>Sometimes, it may look confusing to use <code>.</code> to represent the value being piped. For example,</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> ., <span class="pl-v">data</span> <span class="pl-k">=</span> .))</pre></div>

<p>Although it works perfectly, it may look ambiguous if <code>.</code> has several meanings in one line of code. </p>

<p><code>%&gt;&gt;%</code> accepts lambda expression to direct its piping behavior. Lambda expression is characterized by a formula enclosed within <code>()</code>, for example, <code>(x ~ f(x))</code>. It contains a user-defined symbol to represent the value being piped and the expression to be evaluated.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-vo">df</span> <span class="pl-k">~</span> lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> ., <span class="pl-v">data</span> <span class="pl-k">=</span> <span class="pl-vo">df</span>))</pre></div>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  subset(<span class="pl-v">select</span> <span class="pl-k">=</span> c(<span class="pl-vo">mpg</span>, <span class="pl-vo">wt</span>, <span class="pl-vo">cyl</span>)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-vo">x</span> <span class="pl-k">~</span> plot(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> ., <span class="pl-v">data</span> <span class="pl-k">=</span> <span class="pl-vo">x</span>))</pre></div>

<h4>
<a id="pipe-for-side-effect" class="anchor" href="#pipe-for-side-effect" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pipe for side effect</h4>

<p>In a pipeline, one may be interested not only in the final outcome but sometimes also in intermediate results. To print, plot or save the intermediate results, it must be a side-effect to avoid breaking the mainstream pipeline. For example, calling <code>plot()</code> to draw scatter plot returns <code>NULL</code>, and if one directly calls <code>plot()</code> in the middle of a pipeline, it would break the pipeline by changing the subsequent input to <code>NULL</code>.</p>

<p>One-sided formula that starts with <code>~</code> indicates that the right-hand side expression will only be evaluated for its side-effect, its value will be ignored, and the input value will be returned instead.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  subset(<span class="pl-vo">mpg</span> <span class="pl-k">&gt;</span><span class="pl-k">=</span> quantile(<span class="pl-vo">mpg</span>, <span class="pl-c1">0.05</span>) <span class="pl-k">&amp;</span> <span class="pl-vo">mpg</span> <span class="pl-k">&lt;</span><span class="pl-k">=</span> quantile(<span class="pl-vo">mpg</span>, <span class="pl-c1">0.95</span>)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> cat(<span class="pl-s1"><span class="pl-pds">"</span>rows:<span class="pl-pds">"</span></span>,nrow(.),<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)) %<span class="pl-k">&gt;&gt;</span>%   <span class="pl-c"># cat() returns NULL</span>
  <span class="pl-vo">summary</span></pre></div>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  subset(<span class="pl-vo">mpg</span> <span class="pl-k">&gt;</span><span class="pl-k">=</span> quantile(<span class="pl-vo">mpg</span>, <span class="pl-c1">0.05</span>) <span class="pl-k">&amp;</span> <span class="pl-vo">mpg</span> <span class="pl-k">&lt;</span><span class="pl-k">=</span> quantile(<span class="pl-vo">mpg</span>, <span class="pl-c1">0.95</span>)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> plot(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%    <span class="pl-c"># plot() returns NULL</span>
  (lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%
  summary()</pre></div>

<p>With <code>~</code>, side-effect operations can be easily distinguished from mainstream pipeline.</p>

<p>An easier way to print the intermediate value it to use <code>(? expr)</code> syntax like asking question.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>% 
  (? ncol(.)) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-vo">summary</span></pre></div>

<h4>
<a id="pipe-with-assignment" class="anchor" href="#pipe-with-assignment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pipe with assignment</h4>

<p>In addition to printing and plotting, one may need to save an intermediate value to the environment by assigning the value to a variable (symbol).</p>

<p>If one needs to assign the value to a symbol, just insert a step like <code>(~ symbol)</code>, then the input value of that step will be assigned to <code>symbol</code> in the current environment.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-vo">lm_mtcars</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-vo">summary</span></pre></div>

<p>If the input value is not directly to be saved but after some transformation, then one can use <code>=</code>, <code>&lt;-</code>, or more natural <code>-&gt;</code> to specify a lambda expression to tell what to be saved (thanks <a href="https://github.com/yanlinlin82" class="user-mention">@yanlinlin82</a> for suggestion).</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-v">summ</span> <span class="pl-k">=</span> summary(.)) %<span class="pl-k">&gt;&gt;</span>%  <span class="pl-c"># side-effect assignment</span>
  (lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-vo">lm_mtcars</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-vo">summary</span></pre></div>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> summary(.) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-vo">summ</span>) %<span class="pl-k">&gt;&gt;</span>%

<span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-vo">summ</span> <span class="pl-k">&lt;-</span> summary(.)) %<span class="pl-k">&gt;&gt;</span>%</pre></div>

<p>An easier way to saving intermediate value that is to be further piped is to use <code>(symbol = expression)</code> syntax:</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-v">summ</span> <span class="pl-k">=</span> summary(.)) %<span class="pl-k">&gt;&gt;</span>%  <span class="pl-c"># side-effect assignment</span>
  (<span class="pl-v">lm_mtcars</span> <span class="pl-k">=</span> lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%  <span class="pl-c"># continue piping</span>
  <span class="pl-vo">summary</span></pre></div>

<p>or <code>(expression -&gt; symbol)</code> syntax:</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> summary(.) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-vo">summ</span>) %<span class="pl-k">&gt;&gt;</span>%  <span class="pl-c"># side-effect assignment</span>
  (lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-vo">lm_mtcars</span>) %<span class="pl-k">&gt;&gt;</span>%  <span class="pl-c"># continue piping</span>
  <span class="pl-vo">summary</span></pre></div>

<h4>
<a id="extract-element-from-an-object" class="anchor" href="#extract-element-from-an-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extract element from an object</h4>

<p><code>x %&gt;&gt;% (y)</code> means extracting the element named <code>y</code> from object <code>x</code> where <code>y</code> must be a valid symbol name and <code>x</code> can be a vector, list, environment or anything else for which <code>[[]]</code> is defined, or S4 object.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  (lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> <span class="pl-vo">lm_mtcars</span>) %<span class="pl-k">&gt;&gt;</span>%
  <span class="pl-vo">summary</span> %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-vo">r.squared</span>)</pre></div>

<h4>
<a id="compatibility" class="anchor" href="#compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compatibility</h4>

<ul>
<li>Working with <a href="https://github.com/hadley/dplyr/">dplyr</a>:</li>
</ul>

<div class="highlight highlight-r"><pre>library(<span class="pl-vo">dplyr</span>)
<span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  filter(<span class="pl-vo">mpg</span> <span class="pl-k">&lt;</span><span class="pl-k">=</span> mean(<span class="pl-vo">mpg</span>)) %<span class="pl-k">&gt;&gt;</span>%  
  select(<span class="pl-vo">mpg</span>, <span class="pl-vo">wt</span>, <span class="pl-vo">cyl</span>) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-k">~</span> plot(.)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-v">model</span> <span class="pl-k">=</span> lm(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>, <span class="pl-v">data</span> <span class="pl-k">=</span> .)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-v">summ</span> <span class="pl-k">=</span> summary(.)) %<span class="pl-k">&gt;&gt;</span>%
  (<span class="pl-vo">coefficients</span>)</pre></div>

<ul>
<li>Working with <a href="http://ggvis.rstudio.com/">ggvis</a>:</li>
</ul>

<div class="highlight highlight-r"><pre>library(<span class="pl-vo">ggvis</span>)
<span class="pl-vo">mtcars</span> %<span class="pl-k">&gt;&gt;</span>%
  ggvis(<span class="pl-k">~</span><span class="pl-vo">mpg</span>, <span class="pl-k">~</span><span class="pl-vo">wt</span>) %<span class="pl-k">&gt;&gt;</span>%
  layer_points()</pre></div>

<ul>
<li>Working with <a href="http://renkun.me/rlist/">rlist</a>:</li>
</ul>

<div class="highlight highlight-r"><pre>library(<span class="pl-vo">rlist</span>)
<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">100</span> %<span class="pl-k">&gt;&gt;</span>%
  list.group(. <span class="pl-k">%%</span> <span class="pl-c1">3</span>) %<span class="pl-k">&gt;&gt;</span>%
  list.mapv(<span class="pl-vo">g</span> <span class="pl-k">~</span> mean(<span class="pl-vo">g</span>))</pre></div>

<h3>
<a id="pipe" class="anchor" href="#pipe" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>Pipe()</code>
</h3>

<p><code>Pipe()</code> creates a Pipe object that supports light-weight chaining without any external operator. Typically, start with <code>Pipe()</code> and end with <code>$value</code> or <code>[]</code> to extract the final value of the Pipe. </p>

<p>Pipe object provides an internal function <code>.(...)</code> that work exactly in the same way with <code>x %&gt;&gt;% (...)</code>, and it has more features than <code>%&gt;&gt;%</code>.</p>

<blockquote>
<p>NOTE: <code>.()</code> does not support assignment with <code>=</code> but supports <code>~</code>, <code>&lt;-</code> and <code>-&gt;</code>.</p>
</blockquote>

<h4>
<a id="piping" class="anchor" href="#piping" aria-hidden="true"><span class="octicon octicon-link"></span></a>Piping</h4>

<div class="highlight highlight-r"><pre>Pipe(rnorm(<span class="pl-c1">1000</span>))<span class="pl-k">$</span>
  density(<span class="pl-v">kernel</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>cosine<span class="pl-pds">"</span></span>)<span class="pl-k">$</span>
  plot(<span class="pl-v">col</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>blue<span class="pl-pds">"</span></span>)</pre></div>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span>)<span class="pl-k">$</span>
  .(<span class="pl-vo">mpg</span>)<span class="pl-k">$</span>
  summary()</pre></div>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span>)<span class="pl-k">$</span>
  .(<span class="pl-k">~</span> summary(.) <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-vo">summ</span>)<span class="pl-k">$</span>
  lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>)<span class="pl-k">$</span>
  summary()<span class="pl-k">$</span>
  .(<span class="pl-vo">coefficients</span>)</pre></div>

<h4>
<a id="subsetting-and-extracting" class="anchor" href="#subsetting-and-extracting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Subsetting and extracting</h4>

<div class="highlight highlight-r"><pre><span class="pl-vo">pmtcars</span> <span class="pl-k">&lt;-</span> Pipe(<span class="pl-vo">mtcars</span>)
<span class="pl-vo">pmtcars</span>[c(<span class="pl-s1"><span class="pl-pds">"</span>mpg<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>wt<span class="pl-pds">"</span></span>)]<span class="pl-k">$</span>
  lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span>)<span class="pl-k">$</span>
  summary()
<span class="pl-vo">pmtcars</span>[[<span class="pl-s1"><span class="pl-pds">"</span>mpg<span class="pl-pds">"</span></span>]]<span class="pl-k">$</span>mean()</pre></div>

<h4>
<a id="assigning-values" class="anchor" href="#assigning-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assigning values</h4>

<div class="highlight highlight-r"><pre><span class="pl-vo">plist</span> <span class="pl-k">&lt;-</span> Pipe(<span class="pl-st">list</span>(<span class="pl-v">a</span><span class="pl-k">=</span><span class="pl-c1">1</span>,<span class="pl-v">b</span><span class="pl-k">=</span><span class="pl-c1">2</span>))
<span class="pl-vo">plist</span><span class="pl-k">$</span><span class="pl-vo">a</span> <span class="pl-k">&lt;-</span> <span class="pl-c1">0</span>
<span class="pl-vo">plist</span><span class="pl-k">$</span><span class="pl-vo">b</span> <span class="pl-k">&lt;-</span> <span class="pl-c1">NULL</span></pre></div>

<h4>
<a id="side-effect" class="anchor" href="#side-effect" aria-hidden="true"><span class="octicon octicon-link"></span></a>Side effect</h4>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span>)<span class="pl-k">$</span>
  .(? ncol(.))<span class="pl-k">$</span>
  .(<span class="pl-k">~</span> plot(<span class="pl-vo">mpg</span> <span class="pl-k">~</span> ., <span class="pl-v">data</span> <span class="pl-k">=</span> .))<span class="pl-k">$</span>    <span class="pl-c"># side effect: plot</span>
  lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> .)<span class="pl-k">$</span>
  .(<span class="pl-k">~</span> <span class="pl-vo">lm_mtcars</span>)<span class="pl-k">$</span>                  <span class="pl-c"># side effect: assign</span>
  summary()<span class="pl-k">$</span></pre></div>

<h4>
<a id="compatibility-1" class="anchor" href="#compatibility-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compatibility</h4>

<ul>
<li>Working with dplyr:</li>
</ul>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span>)<span class="pl-k">$</span>
  filter(<span class="pl-vo">mpg</span> <span class="pl-k">&gt;</span><span class="pl-k">=</span> mean(<span class="pl-vo">mpg</span>))<span class="pl-k">$</span>
  select(<span class="pl-vo">mpg</span>, <span class="pl-vo">wt</span>, <span class="pl-vo">cyl</span>)<span class="pl-k">$</span>
  lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">wt</span> <span class="pl-k">+</span> <span class="pl-vo">cyl</span>)<span class="pl-k">$</span>
  summary()<span class="pl-k">$</span>
  .(<span class="pl-vo">coefficients</span>)<span class="pl-k">$</span>
  <span class="pl-vo">value</span></pre></div>

<ul>
<li>Working with ggvis:</li>
</ul>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-vo">mtcars</span>)<span class="pl-k">$</span>
  ggvis(<span class="pl-k">~</span> <span class="pl-vo">mpg</span>, <span class="pl-k">~</span> <span class="pl-vo">wt</span>)<span class="pl-k">$</span>
  layer_points()</pre></div>

<ul>
<li>Working with rlist:</li>
</ul>

<div class="highlight highlight-r"><pre>Pipe(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">100</span>)<span class="pl-k">$</span>
  list.group(. <span class="pl-k">%%</span> <span class="pl-c1">3</span>)<span class="pl-k">$</span>
  list.mapv(<span class="pl-vo">g</span> <span class="pl-k">~</span> mean(<span class="pl-vo">g</span>))<span class="pl-k">$</span>
  <span class="pl-vo">value</span></pre></div>

<h3>
<a id="pipeline" class="anchor" href="#pipeline" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>pipeline()</code>
</h3>

<p><code>pipeline()</code> provides argument-based and expression-based pipeline evaluation mechanisms. Its behavior depends on how its arguments are supplied. If only the first argument is supplied, it expects an expression enclosed in <code>{}</code> in which each line represents a pipeline step. If, instead, multiple arguments are supplied, it regards each argument as a pipeline step. For all pipeline steps, the expressions will be transformed to be connected by <code>%&gt;&gt;%</code> so that they behave exactly the same.</p>

<p>One notable difference is that in <code>pipeline()</code>'s argument or expression, the special symbols to perform specially defined pipeline tasks (e.g. side-effect) does not need to be enclosed within <code>()</code> because no operator priority issues arise as they do in using <code>%&gt;&gt;%</code>.</p>

<div class="highlight highlight-r"><pre>pipeline({
  <span class="pl-vo">mtcars</span>
  lm(<span class="pl-v">formula</span> <span class="pl-k">=</span> <span class="pl-vo">mpg</span> <span class="pl-k">~</span> <span class="pl-vo">cyl</span> <span class="pl-k">+</span> <span class="pl-vo">wt</span>)
  <span class="pl-k">~</span> <span class="pl-vo">lmodel</span>
  <span class="pl-vo">summary</span>
  ? .<span class="pl-k">$</span><span class="pl-vo">r.squared</span>
  <span class="pl-vo">coef</span>
})</pre></div>

<p>Thanks <a href="https://twitter.com/hoxo_m">@hoxo_m</a> for the idea presented in this <a href="http://qiita.com/hoxo_m/items/3fd3d2520fa014a248cb">post</a>.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>This package is under <a href="http://opensource.org/licenses/MIT">MIT License</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">pipeR maintained by <a href="https://github.com/renkun-ken">renkun-ken</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47159422-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
